@{
    ViewData["Title"] = "Panel de Usuario";
    Layout = "_UserLayout";

    // Obtener información del usuario de la sesión
    var userJson = Context.Session.GetString("User");
    var user = !string.IsNullOrEmpty(userJson) ?
        System.Text.Json.JsonSerializer.Deserialize<AvanzadaWeb.Models.SessionUser>(userJson) : null;
}

<div class="row">
    <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Panel de Usuario</h2>
            <span class="badge bg-info">@user?.NivelUsuario</span>
        </div>

        <div class="alert alert-info">
            <h5>¡Bienvenido, @user?.Nombre @user?.Apellido!</h5>
            <p class="mb-0">Desde aquí puedes gestionar toda tu información en el sistema.</p>
        </div>
    </div>
</div>

<div class="row">
    <!-- Tarjeta de Resumen de Vehículos -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">
                    <i class="bi bi-car-front"></i> Mis Vehículos
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Gestiona tus vehículos registrados en el sistema.</p>
                <ul class="list-group list-group-flush mb-3">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Vehículos registrados
                        <span class="badge bg-primary rounded-pill">3</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Próximo service
                        <span class="badge bg-warning rounded-pill">En 15 días</span>
                    </li>
                </ul>
                <a asp-controller="Usuarios" asp-action="MyVehicles" class="btn btn-outline-primary btn-sm">
                    Gestionar Vehículos
                </a>
            </div>
        </div>
    </div>

    <!-- Tarjeta de Próximos Turnos -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">
                    <i class="bi bi-calendar-event"></i> Mis Turnos
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Revisa y gestiona tus turnos programados.</p>
                <ul class="list-group list-group-flush mb-3">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Turnos programados
                        <span class="badge bg-success rounded-pill">2</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        Próximo turno
                        <span class="badge bg-info rounded-pill">Mañana 10:00</span>
                    </li>
                </ul>
                <a asp-controller="Usuarios" asp-action="MyAppointments" class="btn btn-outline-success btn-sm me-2">
                    Ver Turnos
                </a>
                <a asp-controller="Usuarios" asp-action="RequestService" class="btn btn-success btn-sm">
                    Nuevo Turno
                </a>
            </div>
        </div>
    </div>

    <!-- Tarjeta de Perfil -->
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">
                    <i class="bi bi-person"></i> Mi Perfil
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Gestiona tu información personal y preferencias.</p>
                <div class="d-grid gap-2">
                    <a asp-controller="Usuarios" asp-action="Profile" class="btn btn-outline-info btn-sm">
                        Editar Perfil
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Sección de Acciones Rápidas -->
<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Acciones Rápidas</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Vehiculos" asp-action="Create" class="btn btn-outline-primary w-100">
                            <i class="bi bi-plus-circle"></i> Registrar Vehículo
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Turnos" asp-action="Create" class="btn btn-outline-success w-100">
                            <i class="bi bi-calendar-plus"></i> Solicitar Turno
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Usuarios" asp-action="RequestService" class="btn btn-outline-warning w-100">
                            <i class="bi bi-tools"></i> Solicitar Servicio
                        </a>
                    </div>
                    <div class="col-md-3 mb-2">
                        <a asp-controller="Account" asp-action="Logout" class="btn btn-outline-danger w-100">
                            <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>