@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    var userJson = Context.Session.GetString("User");
    var isAdmin = false;

    if (!string.IsNullOrEmpty(userJson))
    {
        var user = System.Text.Json.JsonSerializer.Deserialize<AvanzadaWeb.Models.SessionUser>(userJson);
        isAdmin = user?.NivelUsuario == "Administrador";
    }
}

<nav class="nav flex-column mt-3">
    <!-- Opciones para todos los usuarios -->
    <a class="nav-link" asp-controller="Usuarios" asp-action="Profile">
        <i class="bi bi-person"></i> Editar Perfil
    </a>
    <a class="nav-link" asp-controller="Usuarios" asp-action="MyVehicles">
        <i class="bi bi-car-front"></i> Mis Vehículos
    </a>
    <a class="nav-link" asp-controller="Usuarios" asp-action="MyAppointments">
        <i class="bi bi-calendar-event"></i> Mis Turnos
    </a>
    <a class="nav-link" asp-controller="Usuarios" asp-action="RequestService">
        <i class="bi bi-tools"></i> Solicitar Servicio
    </a>

    <!-- Opciones solo para administradores -->
    @* @if (isAdmin)
    { *@
        <hr>
        <h6 class="px-3 text-muted">Administración</h6>
        <a class="nav-link" asp-controller="Admin" asp-action="ManageAppointments">
            <i class="bi bi-calendar-check"></i> Gestionar Turnos
        </a>
        <a class="nav-link" asp-controller="Admin" asp-action="ManageRoles">
            <i class="bi bi-people-fill"></i> Gestionar Roles
        </a>
    @* } *@
</nav>